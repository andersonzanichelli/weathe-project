(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,a){e.exports=a(74)},74:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"saveCity",function(){return L}),a.d(n,"fetchCities",function(){return J}),a.d(n,"fetchWeather",function(){return M});var r=a(0),c=a.n(r),i=a(21),l=a.n(i),o=a(37),u=a(15),s=a(12),m=a(8),p=a(36),d=a.n(p),h={definitions:{},$schema:"http://json-schema.org/draft-07/schema#",$id:"http://example.com/root.json",type:"object",title:"The Root Schema",required:["cities"],properties:{cities:{$id:"#/properties/cities",type:"array",title:"The Cities Schema",items:{$id:"#/properties/cities/items",type:"object",title:"The Items Schema",required:["name","country"],properties:{name:{$id:"#/properties/cities/items/properties/name",type:"string",title:"The Name Schema",default:"",examples:["Maring\xe1"],pattern:"^(.*)$"},country:{$id:"#/properties/cities/items/properties/country",type:"string",title:"The Country Schema",default:"",examples:["br"],pattern:"^(.*){2}$"}}}}}},y=function(e){e.dispatch;var t=e.getState;return function(e){return function(a){e(a),d.a.validate(t(),h)||console.warn("Invalid state schema!")}}},f=a(39),b=function(e){var t=e.dispatch;return function(e){return function(a){if(!a.payload||!a.payload.then)return e(a);a.payload.then(function(e){var n=Object(f.a)({},a,{payload:e});t(n)})}}},v=a(16),E="save_city",j="fetch_cities",g="fetch_weather",C=Object(m.c)({cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var a=t.payload.data;return[].concat(Object(v.a)(e),[a]);case j:var n=t.payload.data._embedded.data.map(function(e){return{id:e.id,name:e.name,country:e.country}});return[].concat(Object(v.a)(e),Object(v.a)(n));default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return console.log(t.payload.data),[t.payload.data].concat(Object(v.a)(e));default:return e}}}),O=a(9),w=a(10),S=a(13),k=a(11),N=a(14),$=a(18),_=a.n($),T=a(23);var x=function(e){return c.a.createElement("div",null,c.a.createElement(T.Sparklines,{height:120,width:180,data:e.data},c.a.createElement(T.SparklinesLine,{color:e.color}),c.a.createElement(T.SparklinesReferenceLine,{type:"mean"})),c.a.createElement("div",null,(t=e.data,_.a.round(_.a.sum(t)/t.length))," ",e.units));var t},A=function(e){function t(){return Object(O.a)(this,t),Object(S.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"renderWeather",value:function(e){var t=e.city.name,a=_.a.map(e.list.map(function(e){return e.main.temp}),function(e){return parseInt(e-273,10)}),n=e.list.map(function(e){return e.main.pressure}),r=e.list.map(function(e){return e.main.humidity});return c.a.createElement("tr",{key:t},c.a.createElement("td",null,t),c.a.createElement("td",null,c.a.createElement(x,{data:a,v:!0,color:"orange",units:"\xb0C"})),c.a.createElement("td",null,c.a.createElement(x,{data:n,color:"green",units:"hPa"})),c.a.createElement("td",null,c.a.createElement(x,{data:r,color:"blue",units:"%"})))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h4",null,"City Weather"),c.a.createElement("table",{className:"table table-hover"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"City"),c.a.createElement("th",null,"Temperature"),c.a.createElement("th",null,"Pressure"),c.a.createElement("th",null,"Humidity"))),c.a.createElement("tbody",null,this.props.weather.map(this.renderWeather))))}}]),t}(r.Component);var W=Object(s.b)(function(e){return{weather:e.weather}})(A),q=a(24),D=a.n(q),I="http://localhost:8080/weather-api/city";function L(e){var t=D.a.post(I,e);return{type:E,payload:t}}function J(){var e=D.a.get(I);return{type:j,payload:e}}function M(e){var t="http://api.openweathermap.org/data/2.5/forecast?appid=".concat("4a354d9ffeaaddd5b41ad1d434477d81"),a="".concat(t,"&q=").concat(e.name,",").concat(e.country),n=D.a.get(a);return{type:g,payload:n}}var P=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",country:""},a.handleChangeCity=function(e){a.setState({name:e.target.value})},a.handleChangeCountry=function(e){a.setState({country:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.saveCity({name:a.state.name,country:a.state.country}),a.setState({name:"",country:""})},a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return c.a.createElement("form",{className:"form-inline",onSubmit:this.handleSubmit},c.a.createElement("h4",null,"Add a city"),c.a.createElement("div",{className:"form-group mb-2"},c.a.createElement("label",null,"Name"),c.a.createElement("input",{className:"name form-control",id:"cityName",placeholder:"Enter the city name",onChange:this.handleChangeCity,value:this.state.name})),c.a.createElement("div",{className:"form-group mb-2"},c.a.createElement("label",null,"Country"),c.a.createElement("input",{className:"country form-control",id:"cityCountry",placeholder:"Enter the country (ex: br)",onChange:this.handleChangeCountry,value:this.state.country})),c.a.createElement("button",{className:"saveCity btn btn-primary mb-2"},"Add"))}}]),t}(r.Component),R=Object(s.b)(null,n)(P),H=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).weatherCity=function(e){e.preventDefault();var t=document.activeElement.getAttribute("id"),n=t.split("_")[0],r=t.split("_")[1];a.props.fetchWeather({name:n,country:r})},a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCities()}},{key:"renderCities",value:function(){return this.props.cities.map(function(e){return c.a.createElement("li",{className:"list-group-item",key:e.name},c.a.createElement("button",{className:"btn btn-secondary",id:e.name+"_"+e.country,type:"submit"},e.name,",",e.country))})}},{key:"render",value:function(){return c.a.createElement("div",{className:"CityList"},c.a.createElement("h4",null,"City list"),c.a.createElement("form",{onSubmit:this.weatherCity},c.a.createElement("ul",{className:"list-group"},this.renderCities())))}}]),t}(r.Component);var z=Object(s.b)(function(e){return{cities:e.cities}},function(e){return Object(m.b)(n,e)})(H),B=function(e){function t(){return Object(O.a)(this,t),Object(S.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(R,null),c.a.createElement(z,null),c.a.createElement(W,null))}}]),t}(r.Component);l.a.render(c.a.createElement(function(e){var t=e.children,a=e.initialState,n=void 0===a?{}:a,r=Object(m.d)(C,n,Object(m.a)(b,y));return c.a.createElement(s.a,{store:r},t)},null,c.a.createElement(o.a,null,c.a.createElement(u.a,{path:"/",component:B}))),document.querySelector("#root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.805acfa4.chunk.js.map